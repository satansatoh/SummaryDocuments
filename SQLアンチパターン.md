# 1章 カンマ区切り
## 概要
1つのカラムにカンマ区切りで複数の値を持つ。
## アンチな理由
1. 1カラム内で検索するクエリは正確性が低く、コストが高い
2. 他テーブルとJoinしにくい
3. 区切り文字を考慮するという、危険なことをする
## 対応
多対多を作るための交差テーブルを作る  
※交差テーブル…2つのテーブルを参照する外部キーを持つ
## アンチパターンでも生きる場合
1. 配列としての意味しか持たせず、データを扱うのはロジック側である場合
2. DBで検索をしない
3. Joinするテーブルがない
# 2章 ナイーブツリー
## 概要
木構造をノードっぽく、"親は子のIDを持つ"を再帰的に持つ。  
例)組織図,スレッド形式のコメント欄
## アンチな理由
1. 1本のノード構造(隣接リスト)である場合、再帰的な取得文(Select)を書けない。
2. (1)から集約関数は使えない
3. 末端を削除するときに整合性を担保する必要がある(ON DELETE CASCADEをセットすると対応できる)
4. ノードの途中を消したり、昇格したりは、DBで整合性で担保できない  
※最近のRDBMSでは再帰クエリ構文とかもサポートされている
## 対応
### 1. 経路列挙(Path Enumeration)
|ID|path|data|
|---|---|---|
|1|1/|こん|
|2|1/2/|ばんわ|
|3|1/3/|にちは|
- ディレクトリっぽくpathを持ち、区切り文字で区切って管理する
- 先祖ノードの取得効率UP
- 一貫した長さであれば、ソートが容易
- ただ、1章でのアンチな理由が当てはまる
## アンチパターンでも生きる場合
1. ノードは直近の親子を簡単に取得できる
2. ノードの挿入が容易

```
テンプレート
# 章 
## 概要
## アンチな理由
## 対応
## アンチパターンでも生きる場合
```